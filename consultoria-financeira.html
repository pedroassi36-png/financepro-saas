<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FinancePro SaaS</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family:'Segoe UI',sans-serif;
margin:0;
background:linear-gradient(135deg,#0f172a,#1e293b);
color:white;
}

.login, .dashboard{
max-width:1000px;
margin:auto;
padding:30px;
}

.card{
background:#1f2937;
padding:20px;
border-radius:12px;
margin-bottom:20px;
}

input{
width:100%;
padding:10px;
margin:8px 0;
border-radius:8px;
border:none;
background:#374151;
color:white;
}

button{
background:#22c55e;
padding:12px;
border:none;
border-radius:8px;
font-weight:bold;
cursor:pointer;
width:100%;
margin-top:10px;
}

button:hover{background:#16a34a;}

.hidden{display:none;}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
gap:20px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="login" id="loginBox">
<h1>FinancePro SaaS</h1>
<div class="card">
<h2>Login</h2>
<input type="text" id="user" placeholder="Usuário">
<input type="password" id="pass" placeholder="Senha">
<button onclick="login()">Entrar</button>
</div>
</div>

<!-- DASHBOARD -->
<div class="dashboard hidden" id="dash">

<h1>Dashboard Financeiro</h1>

<div class="card">
<h2>Renda</h2>
<div class="grid">
<input type="number" id="clt" placeholder="Salário CLT">
<input type="number" id="extra" placeholder="Renda Extra">
<input type="number" id="rendainv" placeholder="Renda Investimentos">
</div>
</div>

<div class="card">
<h2>Gastos</h2>
<div class="grid">
<input type="number" id="moradia" placeholder="Moradia">
<input type="number" id="alimentacao" placeholder="Alimentação">
<input type="number" id="carro" placeholder="Carro">
<input type="number" id="lazer" placeholder="Lazer">
<input type="number" id="educacao" placeholder="Educação">
<input type="number" id="saude" placeholder="Saúde">
</div>
</div>

<div class="card">
<h2>Investimentos</h2>
<div class="grid">
<input type="number" id="cdb" placeholder="CDB">
<input type="number" id="lci" placeholder="LCI">
<input type="number" id="lca" placeholder="LCA">
<input type="number" id="fii" placeholder="FII">
</div>
</div>

<button onclick="calcular()">Gerar Análise</button>

<div class="card">
<canvas id="graficoPizza"></canvas>
</div>

<div class="card">
<canvas id="graficoBarra"></canvas>
</div>

<div class="card" id="resumo"></div>

<button onclick="gerarPDF()">Gerar PDF</button>

</div>

<script>

function login(){
let user=document.getElementById("user").value;
let pass=document.getElementById("pass").value;

if(user==="admin" && pass==="123"){
document.getElementById("loginBox").classList.add("hidden");
document.getElementById("dash").classList.remove("hidden");
}else{
alert("Usuário ou senha incorretos");
}
}

function calcular(){

let renda = (+clt.value||0)+(+extra.value||0)+(+rendainv.value||0);
let gastos = (+moradia.value||0)+(+alimentacao.value||0)+(+carro.value||0)+(+lazer.value||0)+(+educacao.value||0)+(+saude.value||0);
let investimentos = (+cdb.value||0)+(+lci.value||0)+(+lca.value||0)+(+fii.value||0);

let saldo = renda-gastos;
let percentual = (gastos/renda*100)||0;

localStorage.setItem("resumo",JSON.stringify({renda,gastos,investimentos,saldo,percentual}));

document.getElementById("resumo").innerHTML=`
<h2>Resumo Financeiro</h2>
<p>Renda Total: R$ ${renda.toFixed(2)}</p>
<p>Gastos Totais: R$ ${gastos.toFixed(2)}</p>
<p>Saldo: R$ ${saldo.toFixed(2)}</p>
<p>Investimentos: R$ ${investimentos.toFixed(2)}</p>
<p>Comprometimento: ${percentual.toFixed(1)}%</p>
`;

new Chart(document.getElementById("graficoPizza"),{
type:"pie",
data:{
labels:["Moradia","Alimentação","Carro","Lazer","Educação","Saúde"],
datasets:[{
data:[moradia.value,alimentacao.value,carro.value,lazer.value,educacao.value,saude.value]
}]
}
});

new Chart(document.getElementById("graficoBarra"),{
type:"bar",
data:{
labels:["Renda","Gastos","Saldo"],
datasets:[{
data:[renda,gastos,saldo]
}]
}
});

}

async function gerarPDF(){
const { jsPDF } = window.jspdf;
let doc = new jsPDF();

let dados = JSON.parse(localStorage.getItem("resumo"));

doc.text("Relatório Financeiro",20,20);
doc.text(`Renda: R$ ${dados.renda}`,20,40);
doc.text(`Gastos: R$ ${dados.gastos}`,20,50);
doc.text(`Saldo: R$ ${dados.saldo}`,20,60);
doc.text(`Investimentos: R$ ${dados.investimentos}`,20,70);
doc.text(`Comprometimento: ${dados.percentual.toFixed(1)}%`,20,80);

doc.save("relatorio-financeiro.pdf");
}

</script>

</body>
</html>
